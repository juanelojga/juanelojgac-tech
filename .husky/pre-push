#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run Playwright tests before push
# This ensures that code being pushed has passed all tests
# Comment out if you prefer to only run tests in CI/CD

echo "ğŸ§ª Running Playwright tests before push..."
echo "This may take a few minutes. To skip, use: git push --no-verify"
echo ""

# Run tests on chromium only for speed
# Full browser matrix will run in CI/CD
npm run test:e2e:chromium

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Playwright tests failed!"
  echo "Fix the failing tests before pushing, or use --no-verify to skip (not recommended)"
  exit 1
fi

echo ""
echo "âœ… All tests passed! Proceeding with push..."
