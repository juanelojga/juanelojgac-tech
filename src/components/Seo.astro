---
/**
 * SEO Component - Bilingual Meta Tags & Structured Data
 *
 * Manages all SEO and social media metadata for pages.
 * Supports English and Spanish with full Open Graph, Twitter Card, and Schema.org integration.
 */

import enTranslations from "../i18n/en.json";
import esTranslations from "../i18n/es.json";

interface Props {
  title: string;
  description: string;
  url: string;
  lang: "en" | "es";
  image?: string;
}

const { title, description, url, lang, image } = Astro.props;

// Get translations based on language
const translations = lang === "en" ? enTranslations : esTranslations;
const seo = translations.seo;

// Construct full URLs
const baseUrl = "https://juanelojgac-tech.com";
const canonicalUrl = `${baseUrl}${url}`;
const alternateUrl = lang === "en" ? `${baseUrl}/es${url}` : `${baseUrl}${url.replace("/es", "")}`;
const defaultImage = `${baseUrl}/og-image.jpg`;
const ogImage = image ? `${baseUrl}${image}` : defaultImage;

// Alternate language
const alternateLang = lang === "en" ? "es" : "en";
const alternateLocale = lang === "en" ? "es_ES" : "en_US";
const currentLocale = lang === "en" ? "en_US" : "es_ES";

// Page title with site name
const fullTitle = `${title} | ${seo.siteName}`;

// Structured data for Organization
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  name: seo.organization.name,
  url: baseUrl,
  description: seo.organization.description,
  logo: `${baseUrl}/favicon.ico`,
  sameAs: [
    "https://twitter.com/juanelojgac",
    "https://linkedin.com/company/juanelojgac-tech",
    "https://instagram.com/juanelojgac",
  ],
  contactPoint: {
    "@type": "ContactPoint",
    email: "juan.almeida@juanelojgac-tech.com",
    contactType: "Customer Service",
    availableLanguage: ["English", "Spanish"],
  },
  areaServed: [
    {
      "@type": "Country",
      name: "United States",
    },
    {
      "@type": "Country",
      name: "Ecuador",
    },
  ],
};
---

<!-- Core Meta Tags -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#1BC3C7" />

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta name="title" content={fullTitle} />
<meta name="description" content={description} />
<meta name="keywords" content={seo.keywords} />
<meta name="author" content={seo.siteName} />

<!-- Language and Canonical -->
<html lang={lang}></html>
<link rel="canonical" href={canonicalUrl} />
<link rel="alternate" hreflang={alternateLang} href={alternateUrl} />
<link rel="alternate" hreflang="x-default" href={`${baseUrl}/`} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalUrl} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={ogImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={title} />
<meta property="og:locale" content={currentLocale} />
<meta property="og:locale:alternate" content={alternateLocale} />
<meta property="og:site_name" content={seo.siteName} />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonicalUrl} />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={ogImage} />
<meta name="twitter:image:alt" content={title} />
<meta name="twitter:site" content={seo.twitterHandle} />
<meta name="twitter:creator" content={seo.twitterHandle} />

<!-- Additional SEO Tags -->
<meta name="robots" content="index, follow" />
<meta name="googlebot" content="index, follow" />
<meta name="language" content={lang === "en" ? "English" : "Spanish"} />

<!-- Structured Data (JSON-LD) -->
<script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
